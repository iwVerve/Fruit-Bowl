<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>3000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>radius = 128;
color = make_color_hsv(0, 85/100 * 255, 255);
detail_color = make_color_hsv(0, 0, 90/100 * 255);

STATE_LOOK_AT_PLAYER = 0;
STATE_SAD = 1;
state = STATE_LOOK_AT_PLAYER;

DETAIL_IMAGE_NORMAL = 0;
DETAIL_IMAGE_SAD = 1;
detail_image = DETAIL_IMAGE_NORMAL;
detail_target_x = 0;
detail_target_y = 0;
detail_x = detail_target_x;
detail_y = detail_target_y;
detail_lerp = 0.2;
detail_snap = true;

bob_t = 0;
bob_dist = 3;
bob_period = 200;

cry_timer_duration = 25;
cry_timer = cry_timer_duration;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if state == STATE_LOOK_AT_PLAYER {
    detail_image = DETAIL_IMAGE_NORMAL;
    if instance_exists(objPlayer) {
        var dist = point_distance(x, y, objPlayer.x, objPlayer.y);
        var angle = point_direction(x, y, objPlayer.x, objPlayer.y);
        
        var f = min(max(dist - 32, 0) / 128, 1);
        var detail_dist = 40 * f;
        detail_target_x = 1.25 * lengthdir_x(detail_dist, angle);
        detail_target_y = lengthdir_y(detail_dist, angle);
    }
    else {
        state = STATE_SAD;
    }
}
else if state == STATE_SAD {
    detail_image = DETAIL_IMAGE_SAD;
    detail_target_x = 0;
    detail_target_y = 0;
    
    if cry_timer &lt;= 0 {
        cry_timer = cry_timer_duration;
        var tear = instance_create(
            x + detail_target_x + choose(-1, 1) * random(16),
            y + detail_target_y,
            objOTear
        );
        tear.color = detail_color;
    }
    cry_timer -= 1;
}

if detail_snap {
    detail_x = detail_target_x;
    detail_y = detail_target_y;
    detail_snap = false;
}
else {
    detail_x = lerp(detail_x, detail_target_x, detail_lerp);
    detail_y = lerp(detail_y, detail_target_y, detail_lerp);
}

bob_t += 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var y_offset = bob_dist * dsin(bob_t/bob_period * 360);

draw_set_colour(color);
draw_circle(x, y + y_offset, radius, false);
draw_sprite_ext(
    sprODetail,
    detail_image,
    x + detail_x,
    y + detail_y + y_offset,
    image_xscale,
    image_yscale,
    image_angle,
    detail_color,
    image_alpha
);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
